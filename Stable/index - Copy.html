
<html lang="en">
 <head>
  <link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css" type="text/css">
  <style>
   .map {
    height: 100%;
    width: 100%;
   }

   .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    top: 0%;
    left: 0%;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
   }

   /* Modal Content/Box */
   .modal-content {
    background-color: #fefefe;
    margin: 15% auto; /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 90%; /* Could be more or less, depending on screen size */
	height: 80%
   }

   /* The Close Button */
   .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
   }

   .close:hover,
   .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
   }

   .modalImage {
    width: auto;
   }
  </style>
  <script class="modalImage" src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
  <title>DDG integration</title>
 </head>
 <body>
  <div id="map" class="map"></div>
  <!-- The Modal -->
  <div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
   <span class="close">Ã—</span>
   <h2>COWI LYNGBY (HOVEDKONTOR)</h2>
   <!--iframe width="100%" height="80%" src="https://cmv.cowi.com/?origin=desktop&project=DDG+spatial+buffer+testing&vLayers=DDG+2020+Spatial+buffer;Skaermkort_old&assLayers=DDG+2020+Spatial+buffer&dssLayers=Skaermkort_old&maximize=DDG+2020+Spatial+buffer&x=12.507221043060605&y=55.76604218814943&srid=4326&atoken=5u-gry6iwPLUoNTemKBaPi2DRbdJBW1bhvBPHhwtO2aHuySlDOjzbz6kF_anZXH8-0ONtlxQt4DRVUE-itjaDx6Ex0Sty3x9miYLPc5N_YAwIUqRHZl5kPdlxsT6WhilWTJLvPEKJMjoT9iR1F1TvLACq6smySxw9wIzsQQUSvyQ7y3N4sMS58FWcJ_sSYz1H46bMWCnSJwV112Xi2xYfZivOG3aWZAOQSmhL1hxwFK38HzAEasnEfhU1112yYcEoy40W8zvvLRyPcdwd7mnCQU0msP7hgnMNeoIUAKykbsYYnO5MoxeIniefmrSyUBXcHmNcodqaodHV6TVyUp5yPM7XfTjHOe1lXMIUzbovZOVmw4X1CrmGtHF-BbJCSNxszwmhic6M8iXiihHkATGwZQoWW0VXCWbQxVmlwBLKBijGmUkWal2QPHqx1iPzolRrhSBF9sjRhLk3omUNGxmOguXYdk2fGhELGgYjWnmSoi9raAZaqwpjQSod28ICc_v2LxPu5h5zzVHG0sG_PiZpSCDdRp3uYULJ5mmyjS_wxr_jC1WHA1ZVYRjfBQDv5Lno7LVDIgdSWXDteE48pghO5L7TDIADIuy65Pl0JCI_pnh8yEtsmZvQDScRx44KKH4Y_4FqHcmWJTKIRdWt4VuPZy2zR1UbOrc45_e8r-TcPozeiTuhsAS_bMMa1c49Um8XURlkCJi6YpE-O9c4WL7X9tX3vTa-uQ_7n2f0X2uiCWRW0yf1reWHSDX_MPimE_DpEUVwZyYSfA7E56GJw-s04RKe2hl-kOxqmB1Fz4sCjLDVBn_WKEwSMc9D7Zt1lMeD1np1lSNWVnGB8zHiSXuQw6TElco7sRjPuK61xRW0EVyJjQeo0CL7SU6zdKVyYx7iYf3089cF1S2IEA33vUbkSoAlrRWWPOPTeQCp6YBA8PLvMMji_w9gIeMVQAc6yU5Hi0HSPgSrGI7yXpyNyhcGFsiKGgmAhaJg7dGqmBGDTh6-Yyuf2eWnmGFMhsw-MOfwla7lMmwEVfYVUKPlDQOoIIdv8R7booyqaTl0sJNhbpGZPjVUGeyLicztaglhSzDEbF_mC_fmk_KlOjwn10mcxial3txLEL55ytdC34QrsrGm8YDvQ8yk9TxGTnW9AABzOUsgPWy7O6nMiwBeZHpSKoVtfe8fm1Fu0KXlrLHxXkMY78spN8jHiBNY38tM0qN2jK6U51Qp88zbXpCYw4nNvwu88r6MbqVQ2Hz0p75LMU"></iframe-->
   <iframe width="100%" height="80%" src="https://cmv.cowi.com/?u=COWI_Website_ALSU&p=5542A496&origin=desktop&project=DDG+spatial+buffer+testing&vLayers=DDG+2020+Spatial+buffer;Skaermkort_old&assLayers=DDG+2020+Spatial+buffer&dssLayers=Skaermkort_old&maximize=DDG+2020+Spatial+buffer&x=12.507221043060605&y=55.76604218814943&srid=4326"></iframe>

  </div>
  <script type="text/javascript">
   var modal = document.getElementById("myModal");
   var span = document.getElementsByClassName("close")[0];

   // In a real-life system, we would extract these from a database
   var coordinates = [12.507022036194194, 55.76625033878721];

   span.onclick = function() {
    closeModal();
   }

   // When the user clicks anywhere outside of the modal, close it
   window.onclick = function(event) {
    if (event.target == modal)
     closeModal();
    }

   function closeModal() {
    modal.style.display = "none";
   }

   function createStyle(src, img) {
    return new ol.style.Style({
     image: new ol.style.Icon(({
      anchor: [0.5, 0.96],
      crossOrigin: 'anonymous',
      src: src,
      img: img,
      imgSize: img ? [img.width, img.height] : undefined
     }))
    });
   }

   var iconFeature = new ol.Feature(new ol.geom.Point(ol.proj.fromLonLat(coordinates)));
   iconFeature.setId('moonlight');
   iconFeature.set('style', createStyle('https://openlayers.org/en/latest/examples/data/icon.png', undefined));
	  
   var map = new ol.Map({
    target: 'map',
    layers: [
     new ol.layer.Tile({
      source: new ol.source.OSM()
     }),
     new ol.layer.Vector({
      style: function(feature) {
       return feature.get('style');
      },
      source: new ol.source.Vector({features: [iconFeature]})
     })
    ],
    view: new ol.View({
     center: ol.proj.fromLonLat(coordinates),
     zoom: 10
    })
   });

   map.on('click', function(event) {
    map.forEachFeatureAtPixel(event.pixel, function(feature,layer) {
     if ( feature.getId() == "moonlight" ) {
      modal.style.display = "block";
     }
    });
   });

   map.on('pointermove', function(evt) {
    map.getTargetElement().style.cursor =
     map.hasFeatureAtPixel(evt.pixel) ? 'pointer' : '';
   });

  </script>
 </body>
</html>
		